cc_library(
    name = "fft_size_128",
    srcs = [
        "fft_size_128/ooura_fft.cc",
    ] + select({
        "@platforms//cpu:x86_32": [
            "fft_size_128/ooura_fft_sse2.cc",
        ],
        "@platforms//cpu:x86_64": [
            "fft_size_128/ooura_fft_sse2.cc",
        ],
        "@platforms//cpu:aarch64": [
            "fft_size_128/ooura_fft_neon.cc",
        ],
        "@platforms//cpu:arm64e": [
            "fft_size_128/ooura_fft_neon.cc",
        ],
        "@platforms//cpu:armv7": [
            "fft_size_128/ooura_fft_neon.cc",
        ],
        # TODO(b/278573489): Optimize for RISC-V.
        "//conditions:default": [],
    }),
    hdrs = [
        "fft_size_128/ooura_fft.h",
        "fft_size_128/ooura_fft_tables_common.h",
    ] + select({
        "@platforms//cpu:x86_32": [
            "fft_size_128/ooura_fft_tables_neon_sse2.h",
        ],
        "@platforms//cpu:x86_64": [
            "fft_size_128/ooura_fft_tables_neon_sse2.h",
        ],
        "@platforms//cpu:aarch64": [
            "fft_size_128/ooura_fft_tables_neon_sse2.h",
        ],
        "@platforms//cpu:arm64e": [
            "fft_size_128/ooura_fft_tables_neon_sse2.h",
        ],
        "@platforms//cpu:armv7": [
            "fft_size_128/ooura_fft_tables_neon_sse2.h",
        ],
        "//conditions:default": [],
    }),
    copts = [
        "-fno-exceptions",
    ] + select({
        "@platforms//os:android": [
            "-fno-rtti",
            "-fvisibility=hidden",
        ],
        "@platforms//os:ios": [
            "-fno-rtti",
        ],
        "@platforms//os:macos": [
            "-fno-rtti",
        ],
        "//conditions:default": [],
    }) + select({
        "@platforms//cpu:armv7": [
            "-mfpu=neon",
            "-mfloat-abi=softfp",
        ],
        "@platforms//cpu:x86_32": [
            "-msse2",
        ],
        "@platforms//cpu:x86_64": [
            "-msse2",
        ],
        "//conditions:default": [],
    }),
    visibility = [
        "//visibility:public",
    ],
)

cc_library(
    name = "fft_size_256",
    srcs = ["fft_size_256/fft4g.cc"],
    hdrs = ["fft_size_256/fft4g.h"],
    copts = [
        "-fno-exceptions",
    ] + select({
        "@platforms//os:android": [
            "-fno-rtti",
            "-fvisibility=hidden",
        ],
        "@platforms//os:ios": [
            "-fno-rtti",
        ],
        "@platforms//os:macos": [
            "-fno-rtti",
        ],
        "//conditions:default": [],
    }),
    visibility = [
        "//visibility:public",
    ],
)
